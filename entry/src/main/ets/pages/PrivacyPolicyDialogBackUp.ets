import common from "@ohos.app.ability.common"
import { Want } from "@kit.AbilityKit"
import { BusinessError } from "@ohos.base"

@CustomDialog
export default struct PrivacyPolicyDialogBackUp {
  controller!: CustomDialogController
  cancel!: () => void
  confirm!: () => void

  build() {
    Column() {
      Text("ðŸ± åˆæ¬¡ç›¸è§ï¼Œä½ å¥½å–µ").fontSize(24).fontWeight(FontWeight.Bold).margin({ top: 30, left: 25, bottom: 16,right: 25 })
        .align(Alignment.Start)

      Scroll() {
        Text() {
          Span("æˆ‘ä»¬æ˜¯ çŒ«ä¸ŽçŒ«å¯»ï¼ˆæ­å·žï¼‰æ™ºèƒ½ç§‘æŠ€æœ‰é™å…¬å¸ï¼Œã€ŒçŒ«å’ªæ—¥åŽ†ã€æ˜¯æˆ‘ä»¬å¼€å‘çš„Appã€‚æœ¬Appä¸ä¼šæ”¶é›†æ‚¨çš„ä¿¡æ¯ï¼Œè¯·æ”¾å¿ƒä½¿ç”¨å–µï½ž\n\nè¯·æ‚¨é˜…è¯»")
          Span("ã€ŠçŒ«å’ªæ—¥åŽ†-éšç§æ”¿ç­–ã€‹").fontColor(Color.Orange).onClick(() => {
            let context: common.UIAbilityContext = getContext(this) as common.UIAbilityContext;
            this.startBrowsableAbility(context, "https://zzz.pet/?page_id=135");
          })
        }.fontSize(16).margin({
          left: 25,
          right: 25
        })
      }.height(120)

      Row() {
        Button("ä¸åŒæ„").onClick(() => {
          if (this.controller) {
            this.controller.close();
          }
          this.cancel();
        }).fontColor(Color.Gray)
          .fontSize(15)
          .fontWeight(FontWeight.Bold)
          .backgroundColor(Color.Transparent)
        Button("åŒæ„")
          .onClick(() => {
            if (this.controller) {
              this.controller.close();
            }
            this.confirm();
          })
          .fontColor(Color.White)
          .fontSize(17)
          .fontWeight(FontWeight.Bold)
          .linearGradient({
            direction: GradientDirection.Right, colors: [[Color.Pink, 0.0], [Color.Pink, 1.0]]
          })
          .width('32%')
          .borderRadius(24)
      }
      .margin({
        top: 16, bottom: 24
      })
      .padding({
        left: 25,
        right: 25
      })
      .width('100%')
      .justifyContent(FlexAlign.SpaceAround)
    }
  }

  startBrowsableAbility(context: common.UIAbilityContext, myurl: string): void {
    let want: Want = {
      action: 'ohos.want.action.viewData',
      entities: ['entity.system.browsable'],
      uri: myurl
    };
    context.startAbility(want).then(() => {
      console.log('success')
    }).catch((err: BusinessError) => {
      console.error(`Failed to startAbility. Code: ${err.code}, message: ${err.message}`);
    });
  }
}
